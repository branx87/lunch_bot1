2025-06-22 07:47:33,950 - __main__ - INFO - === ЗАПУСК ПРОГРАММЫ ===
2025-06-22 07:47:33,950 - __main__ - INFO - Инициализация БД по пути: D:\data\lunch_bot.db
2025-06-22 07:47:33,951 - db - INFO - ✅ Все таблицы и индексы созданы или проверены успешно
2025-06-22 07:47:33,951 - __main__ - INFO - База данных успешно инициализирована
2025-06-22 07:47:33,952 - __main__ - INFO - Загрузка данных из БД в конфиг...
2025-06-22 07:47:33,953 - config - INFO - Конфигурация успешно загружена из БД
2025-06-22 07:47:33,953 - __main__ - INFO - Конфиг успешно загружен
2025-06-22 07:47:33,955 - __main__ - INFO - Создание экземпляра бота...
2025-06-22 07:47:34,111 - __main__ - INFO - Запуск основного цикла бота...
2025-06-22 07:47:34,415 - cron_jobs - INFO - Cron задачи настроены в боевом режиме
2025-06-22 07:47:34,481 - bot_core - ERROR - Ошибка запуска бота: cannot import name 'db' from 'db' (D:\lunch_bot\db.py)
Traceback (most recent call last):
  File "D:\lunch_bot\bot_core.py", line 32, in run
    from handlers import setup_handlers
  File "D:\lunch_bot\handlers\__init__.py", line 14, in <module>
    from admin import message_history
  File "D:\lunch_bot\admin.py", line 11, in <module>
    from db import db
ImportError: cannot import name 'db' from 'db' (D:\lunch_bot\db.py)
2025-06-22 07:47:34,481 - bot_core - INFO - Начинаем процесс остановки...
2025-06-22 07:47:34,481 - bot_core - ERROR - Критическая ошибка при остановке: This Updater is not running!
2025-06-22 07:47:34,481 - bot_core - INFO - Все компоненты остановлены
2025-06-22 07:47:34,485 - __main__ - INFO - === ЗАВЕРШЕНИЕ РАБОТЫ ===
2025-06-22 07:57:59,912 - __main__ - INFO - === ЗАПУСК ПРОГРАММЫ ===
2025-06-22 07:57:59,912 - __main__ - INFO - Инициализация БД по пути: D:\data\lunch_bot.db
2025-06-22 07:57:59,912 - __main__ - CRITICAL - КРИТИЧЕСКАЯ ОШИБКА:
Traceback (most recent call last):
  File "D:\lunch_bot\main.py", line 32, in main
    db = Database()
         ^^^^^^^^^^
TypeError: Database.__init__() missing 1 required positional argument: 'db_path'
2025-06-22 07:57:59,912 - __main__ - INFO - === ЗАВЕРШЕНИЕ РАБОТЫ ===
2025-06-22 17:05:19,420 - __main__ - INFO - === ЗАПУСК ПРОГРАММЫ ===
2025-06-22 17:05:19,420 - __main__ - INFO - Инициализация БД по пути: /data/lunch_bot.db
2025-06-22 17:05:19,421 - __main__ - CRITICAL - КРИТИЧЕСКАЯ ОШИБКА:
Traceback (most recent call last):
  File "/app/main.py", line 32, in main
    db = Database()
TypeError: __init__() missing 1 required positional argument: 'db_path'
2025-06-22 17:05:19,423 - __main__ - INFO - === ЗАВЕРШЕНИЕ РАБОТЫ ===
2025-06-22 17:05:19,614 - __main__ - INFO - === ЗАПУСК ПРОГРАММЫ ===
2025-06-22 17:05:19,615 - __main__ - INFO - Инициализация БД по пути: /data/lunch_bot.db
2025-06-22 17:05:19,615 - __main__ - CRITICAL - КРИТИЧЕСКАЯ ОШИБКА:
Traceback (most recent call last):
  File "/app/main.py", line 32, in main
    db = Database()
TypeError: __init__() missing 1 required positional argument: 'db_path'
2025-06-22 17:05:19,617 - __main__ - INFO - === ЗАВЕРШЕНИЕ РАБОТЫ ===
2025-06-22 17:05:19,815 - __main__ - INFO - === ЗАПУСК ПРОГРАММЫ ===
2025-06-22 17:05:19,816 - __main__ - INFO - Инициализация БД по пути: /data/lunch_bot.db
2025-06-22 17:05:19,816 - __main__ - CRITICAL - КРИТИЧЕСКАЯ ОШИБКА:
Traceback (most recent call last):
  File "/app/main.py", line 32, in main
    db = Database()
TypeError: __init__() missing 1 required positional argument: 'db_path'
2025-06-22 17:05:19,818 - __main__ - INFO - === ЗАВЕРШЕНИЕ РАБОТЫ ===
2025-06-22 17:05:20,029 - __main__ - INFO - === ЗАПУСК ПРОГРАММЫ ===
2025-06-22 17:05:20,030 - __main__ - INFO - Инициализация БД по пути: /data/lunch_bot.db
2025-06-22 17:05:20,030 - __main__ - CRITICAL - КРИТИЧЕСКАЯ ОШИБКА:
Traceback (most recent call last):
  File "/app/main.py", line 32, in main
    db = Database()
TypeError: __init__() missing 1 required positional argument: 'db_path'
2025-06-22 17:05:20,032 - __main__ - INFO - === ЗАВЕРШЕНИЕ РАБОТЫ ===
2025-06-22 17:05:20,224 - __main__ - INFO - === ЗАПУСК ПРОГРАММЫ ===
2025-06-22 17:05:20,225 - __main__ - INFO - Инициализация БД по пути: /data/lunch_bot.db
2025-06-22 17:05:20,225 - __main__ - CRITICAL - КРИТИЧЕСКАЯ ОШИБКА:
Traceback (most recent call last):
  File "/app/main.py", line 32, in main
    db = Database()
TypeError: __init__() missing 1 required positional argument: 'db_path'
2025-06-22 17:05:20,228 - __main__ - INFO - === ЗАВЕРШЕНИЕ РАБОТЫ ===
2025-06-22 17:05:20,426 - __main__ - INFO - === ЗАПУСК ПРОГРАММЫ ===
2025-06-22 17:05:20,426 - __main__ - INFO - Инициализация БД по пути: /data/lunch_bot.db
2025-06-22 17:05:20,426 - __main__ - CRITICAL - КРИТИЧЕСКАЯ ОШИБКА:
Traceback (most recent call last):
  File "/app/main.py", line 32, in main
    db = Database()
TypeError: __init__() missing 1 required positional argument: 'db_path'
2025-06-22 17:05:20,429 - __main__ - INFO - === ЗАВЕРШЕНИЕ РАБОТЫ ===
2025-06-22 17:05:20,640 - __main__ - INFO - === ЗАПУСК ПРОГРАММЫ ===
2025-06-22 17:05:20,641 - __main__ - INFO - Инициализация БД по пути: /data/lunch_bot.db
2025-06-22 17:05:20,641 - __main__ - CRITICAL - КРИТИЧЕСКАЯ ОШИБКА:
Traceback (most recent call last):
  File "/app/main.py", line 32, in main
    db = Database()
TypeError: __init__() missing 1 required positional argument: 'db_path'
2025-06-22 17:05:20,644 - __main__ - INFO - === ЗАВЕРШЕНИЕ РАБОТЫ ===
2025-06-22 17:05:20,837 - __main__ - INFO - === ЗАПУСК ПРОГРАММЫ ===
2025-06-22 17:05:20,837 - __main__ - INFO - Инициализация БД по пути: /data/lunch_bot.db
2025-06-22 17:05:20,838 - __main__ - CRITICAL - КРИТИЧЕСКАЯ ОШИБКА:
Traceback (most recent call last):
  File "/app/main.py", line 32, in main
    db = Database()
TypeError: __init__() missing 1 required positional argument: 'db_path'
2025-06-22 17:05:20,840 - __main__ - INFO - === ЗАВЕРШЕНИЕ РАБОТЫ ===
2025-06-22 17:05:21,066 - __main__ - INFO - === ЗАПУСК ПРОГРАММЫ ===
2025-06-22 17:05:21,066 - __main__ - INFO - Инициализация БД по пути: /data/lunch_bot.db
2025-06-22 17:05:21,067 - __main__ - CRITICAL - КРИТИЧЕСКАЯ ОШИБКА:
Traceback (most recent call last):
  File "/app/main.py", line 32, in main
    db = Database()
TypeError: __init__() missing 1 required positional argument: 'db_path'
2025-06-22 17:05:21,069 - __main__ - INFO - === ЗАВЕРШЕНИЕ РАБОТЫ ===
2025-06-22 17:05:21,241 - __main__ - INFO - === ЗАПУСК ПРОГРАММЫ ===
2025-06-22 17:05:21,241 - __main__ - INFO - Инициализация БД по пути: /data/lunch_bot.db
2025-06-22 17:05:21,242 - __main__ - CRITICAL - КРИТИЧЕСКАЯ ОШИБКА:
Traceback (most recent call last):
  File "/app/main.py", line 32, in main
    db = Database()
TypeError: __init__() missing 1 required positional argument: 'db_path'
2025-06-22 17:05:21,245 - __main__ - INFO - === ЗАВЕРШЕНИЕ РАБОТЫ ===
2025-06-22 17:05:21,449 - __main__ - INFO - === ЗАПУСК ПРОГРАММЫ ===
2025-06-22 17:05:21,450 - __main__ - INFO - Инициализация БД по пути: /data/lunch_bot.db
2025-06-22 17:05:21,450 - __main__ - CRITICAL - КРИТИЧЕСКАЯ ОШИБКА:
Traceback (most recent call last):
  File "/app/main.py", line 32, in main
    db = Database()
TypeError: __init__() missing 1 required positional argument: 'db_path'
2025-06-22 17:05:21,453 - __main__ - INFO - === ЗАВЕРШЕНИЕ РАБОТЫ ===
2025-06-22 17:05:21,651 - __main__ - INFO - === ЗАПУСК ПРОГРАММЫ ===
2025-06-22 17:05:21,651 - __main__ - INFO - Инициализация БД по пути: /data/lunch_bot.db
2025-06-22 17:05:21,651 - __main__ - CRITICAL - КРИТИЧЕСКАЯ ОШИБКА:
Traceback (most recent call last):
  File "/app/main.py", line 32, in main
    db = Database()
TypeError: __init__() missing 1 required positional argument: 'db_path'
2025-06-22 17:05:21,654 - __main__ - INFO - === ЗАВЕРШЕНИЕ РАБОТЫ ===
2025-06-22 17:05:21,846 - __main__ - INFO - === ЗАПУСК ПРОГРАММЫ ===
2025-06-22 17:05:21,847 - __main__ - INFO - Инициализация БД по пути: /data/lunch_bot.db
2025-06-22 17:05:21,847 - __main__ - CRITICAL - КРИТИЧЕСКАЯ ОШИБКА:
Traceback (most recent call last):
  File "/app/main.py", line 32, in main
    db = Database()
TypeError: __init__() missing 1 required positional argument: 'db_path'
2025-06-22 17:05:21,850 - __main__ - INFO - === ЗАВЕРШЕНИЕ РАБОТЫ ===
2025-06-22 17:05:22,057 - __main__ - INFO - === ЗАПУСК ПРОГРАММЫ ===
2025-06-22 17:05:22,058 - __main__ - INFO - Инициализация БД по пути: /data/lunch_bot.db
2025-06-22 17:05:22,058 - __main__ - CRITICAL - КРИТИЧЕСКАЯ ОШИБКА:
Traceback (most recent call last):
  File "/app/main.py", line 32, in main
    db = Database()
TypeError: __init__() missing 1 required positional argument: 'db_path'
2025-06-22 17:05:22,061 - __main__ - INFO - === ЗАВЕРШЕНИЕ РАБОТЫ ===
2025-06-22 17:05:22,270 - __main__ - INFO - === ЗАПУСК ПРОГРАММЫ ===
2025-06-22 17:05:22,270 - __main__ - INFO - Инициализация БД по пути: /data/lunch_bot.db
2025-06-22 17:05:22,270 - __main__ - CRITICAL - КРИТИЧЕСКАЯ ОШИБКА:
Traceback (most recent call last):
  File "/app/main.py", line 32, in main
    db = Database()
TypeError: __init__() missing 1 required positional argument: 'db_path'
2025-06-22 17:05:22,274 - __main__ - INFO - === ЗАВЕРШЕНИЕ РАБОТЫ ===
2025-06-22 17:05:22,458 - __main__ - INFO - === ЗАПУСК ПРОГРАММЫ ===
2025-06-22 17:05:22,459 - __main__ - INFO - Инициализация БД по пути: /data/lunch_bot.db
2025-06-22 17:05:22,459 - __main__ - CRITICAL - КРИТИЧЕСКАЯ ОШИБКА:
Traceback (most recent call last):
  File "/app/main.py", line 32, in main
    db = Database()
TypeError: __init__() missing 1 required positional argument: 'db_path'
2025-06-22 17:05:22,462 - __main__ - INFO - === ЗАВЕРШЕНИЕ РАБОТЫ ===
2025-06-22 17:05:22,672 - __main__ - INFO - === ЗАПУСК ПРОГРАММЫ ===
2025-06-22 17:05:22,672 - __main__ - INFO - Инициализация БД по пути: /data/lunch_bot.db
2025-06-22 17:05:22,672 - __main__ - CRITICAL - КРИТИЧЕСКАЯ ОШИБКА:
Traceback (most recent call last):
  File "/app/main.py", line 32, in main
    db = Database()
TypeError: __init__() missing 1 required positional argument: 'db_path'
2025-06-22 17:05:22,675 - __main__ - INFO - === ЗАВЕРШЕНИЕ РАБОТЫ ===
2025-06-22 17:05:22,864 - __main__ - INFO - === ЗАПУСК ПРОГРАММЫ ===
2025-06-22 17:05:22,864 - __main__ - INFO - Инициализация БД по пути: /data/lunch_bot.db
2025-06-22 17:05:22,864 - __main__ - CRITICAL - КРИТИЧЕСКАЯ ОШИБКА:
Traceback (most recent call last):
  File "/app/main.py", line 32, in main
    db = Database()
TypeError: __init__() missing 1 required positional argument: 'db_path'
2025-06-22 17:05:22,867 - __main__ - INFO - === ЗАВЕРШЕНИЕ РАБОТЫ ===
2025-06-22 17:05:23,059 - __main__ - INFO - === ЗАПУСК ПРОГРАММЫ ===
2025-06-22 17:05:23,059 - __main__ - INFO - Инициализация БД по пути: /data/lunch_bot.db
2025-06-22 17:05:23,059 - __main__ - CRITICAL - КРИТИЧЕСКАЯ ОШИБКА:
Traceback (most recent call last):
  File "/app/main.py", line 32, in main
    db = Database()
TypeError: __init__() missing 1 required positional argument: 'db_path'
2025-06-22 17:05:23,062 - __main__ - INFO - === ЗАВЕРШЕНИЕ РАБОТЫ ===
2025-06-22 17:05:23,261 - __main__ - INFO - === ЗАПУСК ПРОГРАММЫ ===
2025-06-22 17:05:23,261 - __main__ - INFO - Инициализация БД по пути: /data/lunch_bot.db
2025-06-22 17:05:23,262 - __main__ - CRITICAL - КРИТИЧЕСКАЯ ОШИБКА:
Traceback (most recent call last):
  File "/app/main.py", line 32, in main
    db = Database()
TypeError: __init__() missing 1 required positional argument: 'db_path'
2025-06-22 17:05:23,264 - __main__ - INFO - === ЗАВЕРШЕНИЕ РАБОТЫ ===
2025-06-22 17:05:23,469 - __main__ - INFO - === ЗАПУСК ПРОГРАММЫ ===
2025-06-22 17:05:23,469 - __main__ - INFO - Инициализация БД по пути: /data/lunch_bot.db
2025-06-22 17:05:23,469 - __main__ - CRITICAL - КРИТИЧЕСКАЯ ОШИБКА:
Traceback (most recent call last):
  File "/app/main.py", line 32, in main
    db = Database()
TypeError: __init__() missing 1 required positional argument: 'db_path'
2025-06-22 17:05:23,472 - __main__ - INFO - === ЗАВЕРШЕНИЕ РАБОТЫ ===
2025-06-22 17:05:23,663 - __main__ - INFO - === ЗАПУСК ПРОГРАММЫ ===
2025-06-22 17:05:23,663 - __main__ - INFO - Инициализация БД по пути: /data/lunch_bot.db
2025-06-22 17:05:23,663 - __main__ - CRITICAL - КРИТИЧЕСКАЯ ОШИБКА:
Traceback (most recent call last):
  File "/app/main.py", line 32, in main
    db = Database()
TypeError: __init__() missing 1 required positional argument: 'db_path'
2025-06-22 17:05:23,666 - __main__ - INFO - === ЗАВЕРШЕНИЕ РАБОТЫ ===
2025-06-22 17:05:23,872 - __main__ - INFO - === ЗАПУСК ПРОГРАММЫ ===
2025-06-22 17:05:23,873 - __main__ - INFO - Инициализация БД по пути: /data/lunch_bot.db
2025-06-22 17:05:23,873 - __main__ - CRITICAL - КРИТИЧЕСКАЯ ОШИБКА:
Traceback (most recent call last):
  File "/app/main.py", line 32, in main
    db = Database()
TypeError: __init__() missing 1 required positional argument: 'db_path'
2025-06-22 17:05:23,875 - __main__ - INFO - === ЗАВЕРШЕНИЕ РАБОТЫ ===
2025-06-22 17:05:24,076 - __main__ - INFO - === ЗАПУСК ПРОГРАММЫ ===
2025-06-22 17:05:24,076 - __main__ - INFO - Инициализация БД по пути: /data/lunch_bot.db
2025-06-22 17:05:24,076 - __main__ - CRITICAL - КРИТИЧЕСКАЯ ОШИБКА:
Traceback (most recent call last):
  File "/app/main.py", line 32, in main
    db = Database()
TypeError: __init__() missing 1 required positional argument: 'db_path'
2025-06-22 17:05:24,079 - __main__ - INFO - === ЗАВЕРШЕНИЕ РАБОТЫ ===
2025-06-22 17:05:24,284 - __main__ - INFO - === ЗАПУСК ПРОГРАММЫ ===
2025-06-22 17:05:24,284 - __main__ - INFO - Инициализация БД по пути: /data/lunch_bot.db
2025-06-22 17:05:24,284 - __main__ - CRITICAL - КРИТИЧЕСКАЯ ОШИБКА:
Traceback (most recent call last):
  File "/app/main.py", line 32, in main
    db = Database()
TypeError: __init__() missing 1 required positional argument: 'db_path'
2025-06-22 17:05:24,287 - __main__ - INFO - === ЗАВЕРШЕНИЕ РАБОТЫ ===
2025-06-22 17:05:24,478 - __main__ - INFO - === ЗАПУСК ПРОГРАММЫ ===
2025-06-22 17:05:24,479 - __main__ - INFO - Инициализация БД по пути: /data/lunch_bot.db
2025-06-22 17:05:24,479 - __main__ - CRITICAL - КРИТИЧЕСКАЯ ОШИБКА:
Traceback (most recent call last):
  File "/app/main.py", line 32, in main
    db = Database()
TypeError: __init__() missing 1 required positional argument: 'db_path'
2025-06-22 17:05:24,482 - __main__ - INFO - === ЗАВЕРШЕНИЕ РАБОТЫ ===
2025-06-22 17:31:22,190 - __main__ - INFO - === ЗАПУСК ПРОГРАММЫ ===
2025-06-22 17:31:22,195 - __main__ - INFO - Инициализация БД по пути: D:\lunch_bot\data\lunch_bot.db
2025-06-22 17:31:22,195 - __main__ - CRITICAL - КРИТИЧЕСКАЯ ОШИБКА:
Traceback (most recent call last):
  File "D:\lunch_bot\main.py", line 32, in main
    db = Database()
         ^^^^^^^^^^
TypeError: Database.__init__() missing 1 required positional argument: 'db_path'
2025-06-22 17:31:22,195 - __main__ - INFO - === ЗАВЕРШЕНИЕ РАБОТЫ ===
2025-06-22 17:33:32,319 - __main__ - INFO - === ЗАПУСК ПРОГРАММЫ ===
2025-06-22 17:33:32,319 - __main__ - INFO - Инициализация БД по пути: D:\lunch_bot\data\lunch_bot.db
2025-06-22 17:33:32,331 - db - INFO - ✅ Все таблицы и индексы созданы или проверены успешно
2025-06-22 17:33:32,331 - __main__ - INFO - База данных успешно инициализирована
2025-06-22 17:33:32,331 - __main__ - INFO - Загрузка данных из БД в конфиг...
2025-06-22 17:33:32,335 - config - INFO - Конфигурация успешно загружена из БД
2025-06-22 17:33:32,335 - __main__ - INFO - Конфиг успешно загружен
2025-06-22 17:33:32,335 - __main__ - INFO - Создание экземпляра бота...
2025-06-22 17:33:34,156 - __main__ - INFO - Запуск основного цикла бота...
2025-06-22 17:33:34,514 - cron_jobs - INFO - Cron задачи настроены в боевом режиме
2025-06-22 17:33:36,252 - bot_core - ERROR - Ошибка запуска бота: cannot import name 'db' from 'db' (D:\lunch_bot\db.py)
Traceback (most recent call last):
  File "D:\lunch_bot\bot_core.py", line 32, in run
    from handlers import setup_handlers
  File "D:\lunch_bot\handlers\__init__.py", line 14, in <module>
    from admin import message_history
  File "D:\lunch_bot\admin.py", line 11, in <module>
    from db import db
ImportError: cannot import name 'db' from 'db' (D:\lunch_bot\db.py)
2025-06-22 17:33:36,255 - bot_core - INFO - Начинаем процесс остановки...
2025-06-22 17:33:36,255 - bot_core - ERROR - Критическая ошибка при остановке: This Updater is not running!
2025-06-22 17:33:36,255 - bot_core - INFO - Все компоненты остановлены
2025-06-22 17:33:36,255 - __main__ - INFO - === ЗАВЕРШЕНИЕ РАБОТЫ ===
2025-06-22 17:53:14,943 - __main__ - INFO - === ЗАПУСК ПРОГРАММЫ ===
2025-06-22 17:53:14,943 - __main__ - INFO - Инициализация БД по пути: D:\lunch_bot\data\lunch_bot.db
2025-06-22 17:53:14,948 - db - INFO - ✅ Все таблицы и индексы созданы или проверены успешно
2025-06-22 17:53:14,948 - __main__ - INFO - База данных успешно инициализирована
2025-06-22 17:53:14,948 - __main__ - INFO - Загрузка данных из БД в конфиг...
2025-06-22 17:53:14,948 - config - INFO - Конфигурация успешно загружена из БД
2025-06-22 17:53:14,948 - __main__ - INFO - Конфиг успешно загружен
2025-06-22 17:53:14,948 - __main__ - INFO - Создание экземпляра бота...
2025-06-22 17:53:15,144 - __main__ - INFO - Запуск основного цикла бота...
2025-06-22 17:53:15,464 - cron_jobs - INFO - Cron задачи настроены в боевом режиме
2025-06-22 17:53:15,623 - bot_core - ERROR - Ошибка запуска бота: cannot import name 'db' from 'db' (D:\lunch_bot\db.py)
Traceback (most recent call last):
  File "D:\lunch_bot\bot_core.py", line 32, in run
    from handlers import setup_handlers
  File "D:\lunch_bot\handlers\__init__.py", line 14, in <module>
    from admin import message_history
  File "D:\lunch_bot\admin.py", line 12, in <module>
    from bot_keyboards import create_admin_keyboard, create_history_keyboard
  File "D:\lunch_bot\bot_keyboards.py", line 6, in <module>
    from db import db
ImportError: cannot import name 'db' from 'db' (D:\lunch_bot\db.py)
2025-06-22 17:53:15,623 - bot_core - INFO - Начинаем процесс остановки...
2025-06-22 17:53:15,628 - bot_core - ERROR - Критическая ошибка при остановке: This Updater is not running!
2025-06-22 17:53:15,628 - bot_core - INFO - Все компоненты остановлены
2025-06-22 17:53:15,628 - __main__ - INFO - === ЗАВЕРШЕНИЕ РАБОТЫ ===
2025-06-22 17:58:49,528 - __main__ - INFO - === ЗАПУСК ПРОГРАММЫ ===
2025-06-22 17:58:49,528 - __main__ - INFO - Инициализация БД по пути: D:\lunch_bot\data\lunch_bot.db
2025-06-22 17:58:49,529 - db - INFO - ✅ Все таблицы и индексы созданы или проверены успешно
2025-06-22 17:58:49,529 - __main__ - INFO - База данных успешно инициализирована
2025-06-22 17:58:49,530 - __main__ - INFO - Загрузка данных из БД в конфиг...
2025-06-22 17:58:49,531 - config - INFO - Конфигурация успешно загружена из БД
2025-06-22 17:58:49,531 - __main__ - INFO - Конфиг успешно загружен
2025-06-22 17:58:49,531 - __main__ - INFO - Создание экземпляра бота...
2025-06-22 17:58:49,726 - __main__ - INFO - Запуск основного цикла бота...
2025-06-22 17:58:50,040 - cron_jobs - INFO - Cron задачи настроены в боевом режиме
2025-06-22 17:58:50,214 - bot_core - ERROR - Ошибка запуска бота: cannot import name 'create_history_keyboard' from 'bot_keyboards' (D:\lunch_bot\bot_keyboards.py)
Traceback (most recent call last):
  File "D:\lunch_bot\bot_core.py", line 32, in run
    from handlers import setup_handlers
  File "D:\lunch_bot\handlers\__init__.py", line 14, in <module>
    from admin import message_history
  File "D:\lunch_bot\admin.py", line 12, in <module>
    from bot_keyboards import create_admin_keyboard, create_history_keyboard
ImportError: cannot import name 'create_history_keyboard' from 'bot_keyboards' (D:\lunch_bot\bot_keyboards.py)
2025-06-22 17:58:50,214 - bot_core - INFO - Начинаем процесс остановки...
2025-06-22 17:58:50,214 - bot_core - ERROR - Критическая ошибка при остановке: This Updater is not running!
2025-06-22 17:58:50,214 - bot_core - INFO - Все компоненты остановлены
2025-06-22 17:58:50,214 - __main__ - INFO - === ЗАВЕРШЕНИЕ РАБОТЫ ===
2025-06-22 18:08:43,635 - __main__ - INFO - === ЗАПУСК ПРОГРАММЫ ===
2025-06-22 18:08:43,635 - __main__ - INFO - Инициализация БД по пути: D:\lunch_bot\data\lunch_bot.db
2025-06-22 18:08:43,635 - db - INFO - ✅ Все таблицы и индексы созданы или проверены успешно
2025-06-22 18:08:43,635 - __main__ - INFO - База данных успешно инициализирована
2025-06-22 18:08:43,635 - __main__ - INFO - Загрузка данных из БД в конфиг...
2025-06-22 18:08:43,635 - config - INFO - Конфигурация успешно загружена из БД
2025-06-22 18:08:43,635 - __main__ - INFO - Конфиг успешно загружен
2025-06-22 18:08:43,635 - __main__ - INFO - Создание экземпляра бота...
2025-06-22 18:08:43,829 - __main__ - INFO - Запуск основного цикла бота...
2025-06-22 18:08:44,156 - cron_jobs - INFO - Cron задачи настроены в боевом режиме
2025-06-22 18:08:44,332 - bot_core - ERROR - Ошибка запуска бота: cannot import name 'db' from 'db' (D:\lunch_bot\db.py)
Traceback (most recent call last):
  File "D:\lunch_bot\bot_core.py", line 32, in run
    from handlers import setup_handlers
  File "D:\lunch_bot\handlers\__init__.py", line 21, in <module>
    from handlers.admin_config_handlers import handle_deletion, setup_admin_config_handlers
  File "D:\lunch_bot\handlers\admin_config_handlers.py", line 27, in <module>
    from db import db
ImportError: cannot import name 'db' from 'db' (D:\lunch_bot\db.py)
2025-06-22 18:08:44,335 - bot_core - INFO - Начинаем процесс остановки...
2025-06-22 18:08:44,335 - bot_core - ERROR - Критическая ошибка при остановке: This Updater is not running!
2025-06-22 18:08:44,335 - bot_core - INFO - Все компоненты остановлены
2025-06-22 18:08:44,335 - __main__ - INFO - === ЗАВЕРШЕНИЕ РАБОТЫ ===
2025-06-23 01:41:35,409 - __main__ - INFO - === ЗАПУСК ПРОГРАММЫ ===
2025-06-23 01:41:35,415 - __main__ - INFO - Инициализация БД по пути: D:\lunch_bot\data\lunch_bot.db
2025-06-23 01:41:35,416 - db - INFO - ✅ Все таблицы и индексы созданы или проверены успешно
2025-06-23 01:41:35,416 - __main__ - INFO - База данных успешно инициализирована
2025-06-23 01:41:35,416 - __main__ - INFO - Загрузка данных из БД в конфиг...
2025-06-23 01:41:35,416 - config - INFO - Конфигурация успешно загружена из БД
2025-06-23 01:41:35,416 - __main__ - INFO - Конфиг успешно загружен
2025-06-23 01:41:35,416 - __main__ - INFO - Создание экземпляра бота...
2025-06-23 01:41:35,416 - __main__ - CRITICAL - КРИТИЧЕСКАЯ ОШИБКА: LunchBot.__init__() takes 2 positional arguments but 3 were given
Traceback (most recent call last):
  File "D:\lunch_bot\main.py", line 47, in main
    bot = LunchBot(db, report_generator)
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: LunchBot.__init__() takes 2 positional arguments but 3 were given
2025-06-23 01:41:35,416 - __main__ - INFO - === ЗАВЕРШЕНИЕ РАБОТЫ ===
2025-06-23 01:43:22,949 - __main__ - INFO - === ЗАПУСК ПРОГРАММЫ ===
2025-06-23 01:43:22,949 - __main__ - INFO - Инициализация БД по пути: D:\lunch_bot\data\lunch_bot.db
2025-06-23 01:43:22,949 - db - INFO - ✅ Все таблицы и индексы созданы или проверены успешно
2025-06-23 01:43:22,951 - __main__ - INFO - База данных успешно инициализирована
2025-06-23 01:43:22,951 - __main__ - INFO - Загрузка данных из БД в конфиг...
2025-06-23 01:43:22,951 - config - INFO - Конфигурация успешно загружена из БД
2025-06-23 01:43:22,951 - __main__ - INFO - Конфиг успешно загружен
2025-06-23 01:43:22,951 - __main__ - INFO - Создание экземпляра бота...
2025-06-23 01:43:22,951 - __main__ - INFO - Запуск основного цикла бота...
2025-06-23 01:43:23,296 - cron_jobs - INFO - Cron задачи настроены в боевом режиме
2025-06-23 01:43:23,405 - bot_core - ERROR - Ошибка запуска бота: cannot import name 'export_daily_admin_report' from 'report_generators' (D:\lunch_bot\report_generators.py)
Traceback (most recent call last):
  File "D:\lunch_bot\bot_core.py", line 33, in run
    from handlers import setup_handlers
  File "D:\lunch_bot\handlers\__init__.py", line 23, in <module>
    from handlers.base_handlers import error_handler, handle_registered_user, handle_text_message, main_menu, start, test_connection
  File "D:\lunch_bot\handlers\base_handlers.py", line 16, in <module>
    from handlers.common_report_handlers import select_month_range
  File "D:\lunch_bot\handlers\common_report_handlers.py", line 10, in <module>
    from report_generators import export_daily_admin_report, export_daily_orders_for_provider, export_monthly_report, export_accounting_report, export_orders_for_provider
ImportError: cannot import name 'export_daily_admin_report' from 'report_generators' (D:\lunch_bot\report_generators.py)
2025-06-23 01:43:23,408 - bot_core - INFO - Начинаем процесс остановки...
2025-06-23 01:43:23,408 - bot_core - ERROR - Критическая ошибка при остановке: This Updater is not running!
2025-06-23 01:43:23,408 - bot_core - INFO - Все компоненты остановлены
2025-06-23 01:43:23,408 - __main__ - INFO - === ЗАВЕРШЕНИЕ РАБОТЫ ===
2025-06-24 22:15:35,766 - __main__ - INFO - === ЗАПУСК ПРОГРАММЫ ===
2025-06-24 22:15:35,766 - __main__ - INFO - Инициализация БД по пути: D:\lunch_bot\data\lunch_bot.db
2025-06-24 22:15:35,766 - db - INFO - ✅ Все таблицы и индексы созданы или проверены успешно
2025-06-24 22:15:35,766 - __main__ - INFO - База данных успешно инициализирована
2025-06-24 22:15:35,766 - __main__ - INFO - Загрузка данных из БД в конфиг...
2025-06-24 22:15:35,766 - config - INFO - Конфигурация успешно загружена из БД
2025-06-24 22:15:35,766 - __main__ - INFO - Конфиг успешно загружен
2025-06-24 22:15:35,766 - __main__ - INFO - Создание экземпляра бота...
2025-06-24 22:15:35,766 - __main__ - INFO - Запуск основного цикла бота...
2025-06-24 22:15:36,092 - cron_jobs - INFO - Cron задачи настроены в боевом режиме
2025-06-24 22:15:36,356 - bot_core - ERROR - Ошибка запуска бота: setup_admin_config_handlers() takes 1 positional argument but 2 were given
Traceback (most recent call last):
  File "D:\lunch_bot\bot_core.py", line 35, in run
    setup_handlers(self.application, self.db)
  File "D:\lunch_bot\handlers\__init__.py", line 72, in setup_handlers
    setup_admin_config_handlers(application, db_connection)
TypeError: setup_admin_config_handlers() takes 1 positional argument but 2 were given
2025-06-24 22:15:36,366 - bot_core - INFO - Начинаем процесс остановки...
2025-06-24 22:15:36,366 - bot_core - ERROR - Критическая ошибка при остановке: This Updater is not running!
2025-06-24 22:15:36,367 - bot_core - INFO - Все компоненты остановлены
2025-06-24 22:15:36,367 - __main__ - INFO - === ЗАВЕРШЕНИЕ РАБОТЫ ===
2025-06-24 22:24:32,236 - __main__ - INFO - === ЗАПУСК ПРОГРАММЫ ===
2025-06-24 22:24:32,236 - __main__ - INFO - Инициализация БД по пути: D:\lunch_bot\data\lunch_bot.db
2025-06-24 22:24:32,236 - db - INFO - ✅ Все таблицы и индексы созданы или проверены успешно
2025-06-24 22:24:32,236 - __main__ - INFO - База данных успешно инициализирована
2025-06-24 22:24:32,236 - __main__ - INFO - Загрузка данных из БД в конфиг...
2025-06-24 22:24:32,240 - config - INFO - Конфигурация успешно загружена из БД
2025-06-24 22:24:32,240 - __main__ - INFO - Конфиг успешно загружен
2025-06-24 22:24:32,240 - __main__ - INFO - Создание экземпляра бота...
2025-06-24 22:24:32,240 - __main__ - INFO - Запуск основного цикла бота...
2025-06-24 22:24:32,557 - cron_jobs - INFO - Cron задачи настроены в боевом режиме
2025-06-24 22:24:33,107 - telegram.ext.Application - INFO - Application started
2025-06-24 22:24:33,176 - bot_core - INFO - Бот @LunchOrderEPCBot запущен
2025-06-24 22:25:09,856 - handlers.base_handlers - ERROR - Ошибка соединения: name 'db' is not defined
2025-06-24 22:25:37,797 - handlers.menu_handlers - WARNING - Меню для Вторник не найдено
2025-06-24 22:25:37,797 - handlers.menu_handlers - WARNING - Меню для Среда не найдено
2025-06-24 22:25:37,797 - handlers.menu_handlers - WARNING - Меню для Четверг не найдено
2025-06-24 22:25:37,797 - handlers.menu_handlers - WARNING - Меню для Пятница не найдено
2025-06-24 22:25:37,997 - handlers.menu_handlers - WARNING - Меню для Понедельник не найдено
2025-06-24 22:26:03,436 - bot_core - INFO - Бот остановлен по запросу
2025-06-24 22:26:03,436 - bot_core - INFO - Начинаем процесс остановки...
2025-06-24 22:26:03,436 - telegram.ext.Application - INFO - Application is stopping. This might take a moment.
2025-06-24 22:26:03,436 - telegram.ext.Application - INFO - Application.stop() complete
2025-06-24 22:26:03,436 - bot_core - INFO - Все компоненты остановлены
2025-06-24 22:26:03,436 - __main__ - INFO - === ЗАВЕРШЕНИЕ РАБОТЫ ===
2025-06-24 22:31:16,837 - __main__ - INFO - === ЗАПУСК ПРОГРАММЫ ===
2025-06-24 22:31:16,837 - __main__ - INFO - Инициализация БД по пути: D:\lunch_bot\data\lunch_bot.db
2025-06-24 22:31:16,837 - db - INFO - ✅ Все таблицы и индексы созданы или проверены успешно
2025-06-24 22:31:16,837 - __main__ - INFO - База данных успешно инициализирована
2025-06-24 22:31:16,837 - __main__ - INFO - Загрузка данных из БД в конфиг...
2025-06-24 22:31:16,837 - config - INFO - Конфигурация успешно загружена из БД
2025-06-24 22:31:16,837 - __main__ - INFO - Конфиг успешно загружен
2025-06-24 22:31:16,837 - __main__ - INFO - Создание экземпляра бота...
2025-06-24 22:31:16,837 - __main__ - INFO - Запуск основного цикла бота...
2025-06-24 22:31:17,174 - cron_jobs - INFO - Cron задачи настроены в боевом режиме
2025-06-24 22:31:17,470 - telegram.ext.Application - INFO - Application started
2025-06-24 22:31:17,538 - bot_core - INFO - Бот @LunchOrderEPCBot запущен
2025-06-24 22:31:26,650 - asyncio - INFO - === Начало обработки view_orders ===
2025-06-24 22:31:26,650 - asyncio - INFO - Источник вызова: message
2025-06-24 22:31:26,650 - asyncio - INFO - Пользователь ID: 361126810
2025-06-24 22:31:26,657 - asyncio - ERROR - Критическая ошибка в view_orders: name 'db' is not defined
Traceback (most recent call last):
  File "D:\lunch_bot\handlers\common_handlers.py", line 45, in view_orders
    db.cursor.execute("""
    ^^
NameError: name 'db' is not defined
2025-06-24 22:31:32,735 - handlers.menu_handlers - ERROR - Ошибка при обработке выбора месяца в статистике: name 'db' is not defined
Traceback (most recent call last):
  File "D:\lunch_bot\handlers\menu_handlers.py", line 420, in monthly_stats_selected
    db.cursor.execute("SELECT id FROM users WHERE telegram_id = ?", (user.id,))
    ^^
NameError: name 'db' is not defined
2025-06-24 22:31:42,587 - bot_core - INFO - Бот остановлен по запросу
2025-06-24 22:31:42,587 - bot_core - INFO - Начинаем процесс остановки...
2025-06-24 22:31:42,587 - telegram.ext.Application - INFO - Application is stopping. This might take a moment.
2025-06-24 22:31:42,587 - telegram.ext.Application - INFO - Application.stop() complete
2025-06-24 22:31:42,587 - bot_core - INFO - Все компоненты остановлены
2025-06-24 22:31:42,587 - __main__ - INFO - === ЗАВЕРШЕНИЕ РАБОТЫ ===
2025-06-24 22:32:33,507 - __main__ - INFO - === ЗАПУСК ПРОГРАММЫ ===
2025-06-24 22:32:33,507 - __main__ - INFO - Инициализация БД по пути: D:\lunch_bot\data\lunch_bot.db
2025-06-24 22:32:33,530 - db - INFO - ✅ Все таблицы и индексы созданы или проверены успешно
2025-06-24 22:32:33,530 - __main__ - INFO - База данных успешно инициализирована
2025-06-24 22:32:33,531 - __main__ - INFO - Загрузка данных из БД в конфиг...
2025-06-24 22:32:33,531 - config - INFO - Конфигурация успешно загружена из БД
2025-06-24 22:32:33,531 - __main__ - INFO - Конфиг успешно загружен
2025-06-24 22:32:33,531 - __main__ - INFO - Создание экземпляра бота...
2025-06-24 22:32:33,532 - __main__ - INFO - Запуск основного цикла бота...
2025-06-24 22:32:33,840 - cron_jobs - INFO - Cron задачи настроены в боевом режиме
2025-06-24 22:32:34,189 - telegram.ext.Application - INFO - Application started
2025-06-24 22:32:34,286 - bot_core - INFO - Бот @LunchOrderEPCBot запущен
2025-06-24 22:32:36,117 - asyncio - INFO - === Начало обработки view_orders ===
2025-06-24 22:32:36,117 - asyncio - INFO - Источник вызова: message
2025-06-24 22:32:36,117 - asyncio - INFO - Пользователь ID: 361126810
2025-06-24 22:32:36,117 - asyncio - ERROR - Критическая ошибка в view_orders: name 'db' is not defined
Traceback (most recent call last):
  File "D:\lunch_bot\handlers\common_handlers.py", line 45, in view_orders
    db.cursor.execute("""
    ^^
NameError: name 'db' is not defined
2025-06-24 22:32:41,684 - handlers.menu_handlers - WARNING - Меню для Вторник не найдено
2025-06-24 22:32:41,684 - handlers.menu_handlers - WARNING - Меню для Среда не найдено
2025-06-24 22:32:41,684 - handlers.menu_handlers - WARNING - Меню для Четверг не найдено
2025-06-24 22:32:41,684 - handlers.menu_handlers - WARNING - Меню для Пятница не найдено
2025-06-24 22:32:41,952 - handlers.menu_handlers - WARNING - Меню для Понедельник не найдено
2025-06-24 22:32:49,067 - handlers.menu_handlers - ERROR - Ошибка при обработке выбора месяца в статистике: name 'db' is not defined
Traceback (most recent call last):
  File "D:\lunch_bot\handlers\menu_handlers.py", line 420, in monthly_stats_selected
    db.cursor.execute("SELECT id FROM users WHERE telegram_id = ?", (user.id,))
    ^^
NameError: name 'db' is not defined
2025-06-24 22:32:51,667 - bot_core - INFO - Бот остановлен по запросу
2025-06-24 22:32:51,667 - bot_core - INFO - Начинаем процесс остановки...
2025-06-24 22:32:51,667 - telegram.ext.Application - INFO - Application is stopping. This might take a moment.
2025-06-24 22:32:51,667 - telegram.ext.Application - INFO - Application.stop() complete
2025-06-24 22:32:51,667 - bot_core - INFO - Все компоненты остановлены
2025-06-24 22:32:51,667 - __main__ - INFO - === ЗАВЕРШЕНИЕ РАБОТЫ ===
2025-06-24 22:33:40,447 - __main__ - INFO - === ЗАПУСК ПРОГРАММЫ ===
2025-06-24 22:33:40,447 - __main__ - INFO - Инициализация БД по пути: D:\lunch_bot\data\lunch_bot.db
2025-06-24 22:33:40,448 - db - INFO - ✅ Все таблицы и индексы созданы или проверены успешно
2025-06-24 22:33:40,448 - __main__ - INFO - База данных успешно инициализирована
2025-06-24 22:33:40,448 - __main__ - INFO - Загрузка данных из БД в конфиг...
2025-06-24 22:33:40,448 - config - INFO - Конфигурация успешно загружена из БД
2025-06-24 22:33:40,448 - __main__ - INFO - Конфиг успешно загружен
2025-06-24 22:33:40,448 - __main__ - INFO - Создание экземпляра бота...
2025-06-24 22:33:40,457 - __main__ - INFO - Запуск основного цикла бота...
2025-06-24 22:33:40,757 - cron_jobs - INFO - Cron задачи настроены в боевом режиме
2025-06-24 22:33:41,097 - telegram.ext.Application - INFO - Application started
2025-06-24 22:33:41,247 - bot_core - INFO - Бот @LunchOrderEPCBot запущен
2025-06-24 22:33:44,073 - handlers.menu_handlers - WARNING - Меню для Вторник не найдено
2025-06-24 22:33:44,073 - handlers.menu_handlers - WARNING - Меню для Среда не найдено
2025-06-24 22:33:44,073 - handlers.menu_handlers - WARNING - Меню для Четверг не найдено
2025-06-24 22:33:44,073 - handlers.menu_handlers - WARNING - Меню для Пятница не найдено
2025-06-24 22:33:44,318 - handlers.menu_handlers - WARNING - Меню для Понедельник не найдено
2025-06-24 22:33:53,887 - bot_core - INFO - Бот остановлен по запросу
2025-06-24 22:33:53,887 - bot_core - INFO - Начинаем процесс остановки...
2025-06-24 22:33:53,894 - telegram.ext.Application - INFO - Application is stopping. This might take a moment.
2025-06-24 22:33:53,894 - telegram.ext.Application - INFO - Application.stop() complete
2025-06-24 22:33:53,894 - bot_core - INFO - Все компоненты остановлены
2025-06-24 22:33:53,894 - __main__ - INFO - === ЗАВЕРШЕНИЕ РАБОТЫ ===
2025-06-24 22:53:50,747 - __main__ - INFO - === ЗАПУСК ПРОГРАММЫ ===
2025-06-24 22:53:50,747 - __main__ - INFO - Инициализация БД по пути: D:\lunch_bot\data\lunch_bot.db
2025-06-24 22:53:50,763 - db - INFO - ✅ Структура базы данных успешно инициализирована
2025-06-24 22:53:50,765 - __main__ - INFO - База данных успешно инициализирована
2025-06-24 22:53:50,765 - __main__ - INFO - Загрузка данных из БД в конфиг...
2025-06-24 22:53:50,766 - config - INFO - Конфигурация успешно загружена из БД
2025-06-24 22:53:50,767 - __main__ - INFO - Конфиг успешно загружен
2025-06-24 22:53:50,767 - __main__ - INFO - Создание экземпляра бота...
2025-06-24 22:53:50,767 - __main__ - INFO - Запуск основного цикла бота...
2025-06-24 22:53:51,077 - cron_jobs - INFO - Cron задачи настроены в боевом режиме
2025-06-24 22:53:51,371 - telegram.ext.Application - INFO - Application started
2025-06-24 22:53:51,458 - bot_core - INFO - Бот @LunchOrderEPCBot запущен
2025-06-24 22:54:00,787 - handlers.menu_handlers - WARNING - Меню для Вторник не найдено
2025-06-24 22:54:00,787 - handlers.menu_handlers - WARNING - Меню для Среда не найдено
2025-06-24 22:54:00,791 - handlers.menu_handlers - WARNING - Меню для Четверг не найдено
2025-06-24 22:54:00,791 - handlers.menu_handlers - WARNING - Меню для Пятница не найдено
2025-06-24 22:54:01,317 - handlers.menu_handlers - WARNING - Меню для Понедельник не найдено
2025-06-24 22:54:13,887 - asyncio - INFO - === Начало обработки view_orders ===
2025-06-24 22:54:13,887 - asyncio - INFO - Источник вызова: message
2025-06-24 22:54:13,887 - asyncio - INFO - Пользователь ID: 361126810
2025-06-24 22:54:13,887 - asyncio - ERROR - Критическая ошибка в view_orders: name 'db' is not defined
Traceback (most recent call last):
  File "D:\lunch_bot\handlers\common_handlers.py", line 45, in view_orders
    db.cursor.execute("""
    ^^
NameError: name 'db' is not defined
2025-06-24 22:54:21,513 - handlers.menu_handlers - ERROR - Ошибка при обработке выбора месяца в статистике: name 'db' is not defined
Traceback (most recent call last):
  File "D:\lunch_bot\handlers\menu_handlers.py", line 420, in monthly_stats_selected
    db.cursor.execute("SELECT id FROM users WHERE telegram_id = ?", (user.id,))
    ^^
NameError: name 'db' is not defined
2025-06-24 22:54:28,350 - bot_core - INFO - Бот остановлен по запросу
2025-06-24 22:54:28,350 - bot_core - INFO - Начинаем процесс остановки...
2025-06-24 22:54:28,350 - telegram.ext.Application - INFO - Application is stopping. This might take a moment.
2025-06-24 22:54:28,353 - telegram.ext.Application - INFO - Application.stop() complete
2025-06-24 22:54:28,353 - bot_core - INFO - Все компоненты остановлены
2025-06-24 22:54:28,353 - __main__ - INFO - === ЗАВЕРШЕНИЕ РАБОТЫ ===
2025-06-24 23:03:49,207 - __main__ - INFO - === ЗАПУСК ПРОГРАММЫ ===
2025-06-24 23:03:49,207 - __main__ - INFO - Инициализация БД по пути: D:\lunch_bot\data\lunch_bot.db
2025-06-24 23:03:49,207 - db - INFO - ✅ Структура базы данных успешно инициализирована
2025-06-24 23:03:49,207 - __main__ - INFO - База данных успешно инициализирована
2025-06-24 23:03:49,207 - __main__ - INFO - Загрузка данных из БД в конфиг...
2025-06-24 23:03:49,207 - config - INFO - Конфигурация успешно загружена из БД
2025-06-24 23:03:49,207 - __main__ - INFO - Конфиг успешно загружен
2025-06-24 23:03:49,207 - __main__ - INFO - Создание экземпляра бота...
2025-06-24 23:03:49,207 - __main__ - INFO - Запуск основного цикла бота...
2025-06-24 23:03:49,520 - cron_jobs - INFO - Cron задачи настроены в боевом режиме
2025-06-24 23:03:49,837 - telegram.ext.Application - INFO - Application started
2025-06-24 23:03:49,908 - bot_core - INFO - Бот @LunchOrderEPCBot запущен
2025-06-24 23:04:02,990 - bot_core - INFO - Бот остановлен по запросу
2025-06-24 23:04:02,990 - bot_core - INFO - Начинаем процесс остановки...
2025-06-24 23:04:02,990 - telegram.ext.Application - INFO - Application is stopping. This might take a moment.
2025-06-24 23:04:02,990 - telegram.ext.Application - INFO - Application.stop() complete
2025-06-24 23:04:02,990 - bot_core - INFO - Все компоненты остановлены
2025-06-24 23:04:02,990 - __main__ - INFO - === ЗАВЕРШЕНИЕ РАБОТЫ ===
2025-06-24 23:04:14,087 - __main__ - INFO - === ЗАПУСК ПРОГРАММЫ ===
2025-06-24 23:04:14,087 - __main__ - INFO - Инициализация БД по пути: D:\lunch_bot\data\lunch_bot.db
2025-06-24 23:04:14,094 - db - INFO - ✅ Структура базы данных успешно инициализирована
2025-06-24 23:04:14,094 - __main__ - INFO - База данных успешно инициализирована
2025-06-24 23:04:14,094 - __main__ - INFO - Загрузка данных из БД в конфиг...
2025-06-24 23:04:14,097 - config - INFO - Конфигурация успешно загружена из БД
2025-06-24 23:04:14,098 - __main__ - INFO - Конфиг успешно загружен
2025-06-24 23:04:14,099 - __main__ - INFO - Создание экземпляра бота...
2025-06-24 23:04:14,099 - __main__ - INFO - Запуск основного цикла бота...
2025-06-24 23:04:14,407 - cron_jobs - INFO - Cron задачи настроены в боевом режиме
2025-06-24 23:04:14,808 - telegram.ext.Application - INFO - Application started
2025-06-24 23:04:14,898 - bot_core - INFO - Бот @LunchOrderEPCBot запущен
2025-06-24 23:04:19,577 - handlers.menu_handlers - WARNING - Меню для Вторник не найдено
2025-06-24 23:04:19,577 - handlers.menu_handlers - WARNING - Меню для Среда не найдено
2025-06-24 23:04:19,577 - handlers.menu_handlers - WARNING - Меню для Четверг не найдено
2025-06-24 23:04:19,577 - handlers.menu_handlers - WARNING - Меню для Пятница не найдено
2025-06-24 23:04:19,806 - handlers.menu_handlers - WARNING - Меню для Понедельник не найдено
2025-06-24 23:04:24,196 - asyncio - INFO - === Начало обработки view_orders ===
2025-06-24 23:04:24,196 - asyncio - INFO - Источник вызова: message
2025-06-24 23:04:24,196 - asyncio - INFO - Пользователь ID: 361126810
2025-06-24 23:04:24,197 - asyncio - INFO - Найдено активных заказов: 0
2025-06-24 23:04:51,567 - middleware - INFO - Доступ запрещен для пользователя 510902916
2025-06-24 23:05:11,023 - middleware - INFO - Доступ запрещен для пользователя 510902916
2025-06-24 23:05:11,287 - handlers.menu_handlers - WARNING - Меню для Вторник не найдено
2025-06-24 23:05:11,287 - handlers.menu_handlers - WARNING - Меню для Среда не найдено
2025-06-24 23:05:11,287 - handlers.menu_handlers - WARNING - Меню для Четверг не найдено
2025-06-24 23:05:11,287 - handlers.menu_handlers - WARNING - Меню для Пятница не найдено
2025-06-24 23:05:11,581 - handlers.menu_handlers - WARNING - Меню для Понедельник не найдено
2025-06-24 23:05:27,957 - bot_core - INFO - Бот остановлен по запросу
2025-06-24 23:05:27,957 - bot_core - INFO - Начинаем процесс остановки...
2025-06-24 23:05:27,960 - telegram.ext.Application - INFO - Application is stopping. This might take a moment.
2025-06-24 23:05:27,960 - telegram.ext.Application - INFO - Application.stop() complete
2025-06-24 23:05:27,960 - bot_core - INFO - Все компоненты остановлены
2025-06-24 23:05:27,960 - __main__ - INFO - === ЗАВЕРШЕНИЕ РАБОТЫ ===
2025-06-24 23:05:56,667 - __main__ - INFO - === ЗАПУСК ПРОГРАММЫ ===
2025-06-24 23:05:56,667 - __main__ - INFO - Инициализация БД по пути: D:\lunch_bot\data\lunch_bot.db
2025-06-24 23:05:56,667 - db - INFO - ✅ Структура базы данных успешно инициализирована
2025-06-24 23:05:56,672 - __main__ - INFO - База данных успешно инициализирована
2025-06-24 23:05:56,672 - __main__ - INFO - Загрузка данных из БД в конфиг...
2025-06-24 23:05:56,672 - config - INFO - Конфигурация успешно загружена из БД
2025-06-24 23:05:56,672 - __main__ - INFO - Конфиг успешно загружен
2025-06-24 23:05:56,672 - __main__ - INFO - Создание экземпляра бота...
2025-06-24 23:05:56,672 - __main__ - INFO - Запуск основного цикла бота...
2025-06-24 23:05:56,982 - cron_jobs - INFO - Cron задачи настроены в боевом режиме
2025-06-24 23:05:57,241 - telegram.ext.Application - INFO - Application started
2025-06-24 23:05:57,318 - bot_core - INFO - Бот @LunchOrderEPCBot запущен
2025-06-24 23:05:58,847 - middleware - INFO - Доступ запрещен для пользователя 510902916
2025-06-24 23:06:08,471 - middleware - INFO - Доступ запрещен для пользователя 510902916
2025-06-24 23:06:08,918 - handlers.menu_handlers - WARNING - Меню для Вторник не найдено
2025-06-24 23:06:08,918 - handlers.menu_handlers - WARNING - Меню для Среда не найдено
2025-06-24 23:06:08,918 - handlers.menu_handlers - WARNING - Меню для Четверг не найдено
2025-06-24 23:06:08,918 - handlers.menu_handlers - WARNING - Меню для Пятница не найдено
2025-06-24 23:06:09,336 - handlers.menu_handlers - WARNING - Меню для Понедельник не найдено
2025-06-24 23:06:10,931 - middleware - INFO - Доступ запрещен для пользователя 510902916
2025-06-24 23:06:11,042 - handlers.base_handlers - ERROR - Ошибка: name 'db' is not defined
Traceback (most recent call last):
  File "D:\lunch_bot\venv\Lib\site-packages\telegram\ext\_application.py", line 1124, in process_update
    await coroutine
  File "D:\lunch_bot\venv\Lib\site-packages\telegram\ext\_conversationhandler.py", line 825, in handle_update
    new_state: object = await handler.handle_update(
                        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\lunch_bot\venv\Lib\site-packages\telegram\ext\_handler.py", line 141, in handle_update
    return await self.callback(update, context)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\lunch_bot\handlers\menu_handlers.py", line 23, in show_today_menu
    if not await check_registration(update, context):
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\lunch_bot\utils.py", line 134, in check_registration
    db.cursor.execute("""
    ^^
NameError: name 'db' is not defined
2025-06-24 23:06:28,530 - bot_core - INFO - Бот остановлен по запросу
2025-06-24 23:06:28,530 - bot_core - INFO - Начинаем процесс остановки...
2025-06-24 23:06:28,530 - telegram.ext.Application - INFO - Application is stopping. This might take a moment.
2025-06-24 23:06:28,530 - telegram.ext.Application - INFO - Application.stop() complete
2025-06-24 23:06:28,530 - bot_core - INFO - Все компоненты остановлены
2025-06-24 23:06:28,530 - __main__ - INFO - === ЗАВЕРШЕНИЕ РАБОТЫ ===
